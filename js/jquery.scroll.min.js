/**
 *
 * Scroll bar´s v. 2.0 
 *
 * @decription: Crea un scroll personalizado con css y con los eventos del mouse.
 * @date : 25/05/2015 
 * @Create by : Carlos David Vélez Estrada
 * @Email : creacion.paginasweb@hotmail.com
 * @website : http://www.creacionwebamalfi.com/
 * @email : cadavestra@gmail.com
 * All rights reserved - uses free
 *
*/
(function(d){d.scrollbars=d.scrollbars||{};d.scrollbars.defauls={options:{animate:!0,bar_size:!0,hide:!1,wheel:80,speed:200,easing:"easeOutQuart",clase_contenido:".wrap-content-scroll",css_barra:null,css_barrita:null,css_contenido:null,debug:!1,positionDanguer:"top",distance:20,event_settings:{latency:1500,mouseover:!0},init:function(){},onScrollTop:function(){},onScrollEnd:function(){},onUpdate:function(){},onScrolling:function(){},prop:{}}};d.fn.scrollbars=function(n){if(!this||0==this.length)return this;
var N=arguments;return this.each(function(){var e=d(this).addClass("wrap-content-overflow");if("string"==typeof n)return e.trigger(n,Array.prototype.slice.call(N,1));e.trigger("destroy");var S=d.extend({},d.scrollbars.defauls.options,n||{}),a=d.extend({},S,e.data()||{}),c=d(document.createElement("div")).addClass("scroll-bars"),g=d(document.createElement("div")).addClass("scroll-baris"),k=e.find(a.clase_contenido).addClass("wrap-content-scroll"),F,z=!1,A=!1,x,p,u=!0,m=e.outerHeight(),q=k.outerHeight(!0),
r,B=0,t,G=!0,f={},v=0,H="undefined"==typeof jQuery.easing[a.easing]?"":a.easing,E=this;a._plugins={scroll_activity:!!jQuery.event.special.mousewheelactivity,mousewheel:!!jQuery.event.special.mousewheel};var I=function(){window.console&&window.console.log&&1==a.debug&&console.log(arguments)},l=function(b,a){if(!isNaN(parseFloat(b)))return a?!0:parseFloat(b);if(a)return!1;I("["+b+"] No es un n\u00famero.");return!1},O=function(){if("inherit"==a.positionDanguer){var b=-1*l(k.css("top"));v=k.offset().top+
b-e.offset().top}else v=0},Q=function(){e.removeData("scroll");e.unbind();c.unbind();d(document).unbind("mousemove.scroll",P).unbind("mouseup.scroll");a._plugins.mousewheel&&!a._plugins.scroll_activity?e.unmousewheel(w):a._plugins.mousewheel&&a._plugins.scroll_activity?e.unbind("mousewheelactivity"):this.removeEventListener?(e[0].removeEventListener("DOMMouseScroll",w,!1),e[0].removeEventListener("mousewheel",w,!1)):e[0].onmousewheel=null;e.find(".scroll-bars").remove()},J=function(b){(F=q>m)?c.stop(!0,
!0).fadeIn("slow"):c.stop(!0,!0).fadeOut("slow")},K=function(b){1!=G||g.data("evt_org")?c.stop().show():c.stop(!0,!0).fadeOut("fast")},w=function(b,C,h,d,c){e.stop(!0,!1);g.stop(!0,!1);if(k.outerHeight()<=e.outerHeight()-v)return!1;b=c?b:b||window.event;C=c?C:b.wheelDelta?b.wheelDelta/120:-b.detail/3;G=!0;B=0<B+C*a.wheel?0:B+C*a.wheel;C=0<B?-1*a.wheel:B;D("onScrolling",b);return f=y(-1*C,void 0,b)},M=function(b){try{b.preventDefault?b.preventDefault():b.returnValue&&(b.returnValue=!1),b.stopImmediatePropagation()}catch(a){}b.offset=
g.offset();b.top="auto"==g.css("top")?0:l(g.css("top"));g.data("evt_org",b);d(document).bind("mousemove.scroll",P);G=!1},P=function(b){b.preventDefault();var a=g.data("evt_org");b.startX=a.pageX;b.startY=a.pageY;b.deltaX=b.pageX-a.pageX;b.deltaY=b.pageY-a.pageY;b.originalX=a.offset.left;b.originalY=a.offset.top;b.offsetX=b.originalX+b.deltaX;b.offsetY=b.originalY+b.deltaY;b.top=a.top;b=b.startY-(b.pageY+b.top);return f=y(-1*(0>b?b:0)*t,!0)},T=function(){d(document).bind("mouseup.scroll",function(b){try{b.preventDefault?
b.preventDefault():b.returnValue&&(b.returnValue=!1)}catch(a){}g.removeData("evt_org");G=!0;d(document).unbind("mousemove.scroll")})},U=function(b){x=b.pageY;var a=x-c.offset().top;p-a<r&&a>r?a-=r:a>r&&(a-=r/2);return f=y(a*t,void 0,b)},V=function(){if(!e.is(":visible")||!k.is(":visible"))return!1;var b="auto"==k.css("top")?0:l(k.css("top"));m=e.outerHeight();q=k.outerHeight(!0);p=l(a.bar_size,!0)?l(a.bar_size):m;O();p-=v;m-=v;c.setOuterHeight(p-1);p=c.height();t=q/p;F=q>m;g.setOuterHeight(m/t,!1,
!0);r=g.data("_outerHeight");g.stop().animate({height:r+"px"},{duration:a.speed,easing:H,queue:!1});a.prop.height={wrap_scroll:m,warp_content:q,barra:p,barrita:r,factor:t};0<b||q<=m?(b=0,c.fadeOut(0)):(c.fadeIn(0),b=-1*b+.001);f=y(b);D("onUpdate")},W=function(){L({},"0%")},X=function(){L({},"100%")},R=function(b,a){var e=(b+"").charAt(0);return"+"==e?l(a)+l(b):"-"==e?-1*l(a)-l(b):!1},y=function(b,e,h){var d="auto"==k.css("top")?0:-1*l(k.css("top")),c=q-m,n=R(b,d);b=n?0>n?-1*n:n:l(b);f.warp=null;f.barra=
null;f._function="";f.move=!1;f.percent=null;c=Math.max(0,c);b=Math.min(c,Math.max(b,0));a.distance*t>b?(f._function="onScrollTop",A=!1):b>=c-a.distance*t?(f._function="onScrollEnd",z=!1):A=z=!1;f.move=b!==d;f.barra=b/t;f.warp=B=-1*b;if(f.move){try{!e&&h&&h.preventDefault?h.preventDefault():!e&&h&&h.returnValue&&(h.returnValue=!1)}catch(p){}f.percent=100*b/(q-m);J();h=f.warp;d=f.barra;c="";c=void 0!=c?c:void 0!=c?c:"";1!=a.animate||"undefined"!=typeof e?(l(h,!0)&&k.css({top:h+"px"}),l(d,!0)&&g.css({top:d+
"px"})):(l(h,!0)&&k.animate({top:h+"px"},{duration:a.speed,easing:H,queue:!1}),l(d,!0)&&g.animate({top:d+"px"},{duration:a.speed,easing:H,queue:!1}));D(c);"onScrollTop"==f._function&&0==z?(D(f._function),z=!0):"onScrollEnd"==f._function&&0==A&&(D(f._function),A=!0);a.prop.poss=f}return f},L=function(a,c){if(k.outerHeight()<=e.outerHeight())return!1;var h="auto"==k.css("top")?1:-1*l(k.css("top"));if("string"===d.type(c)&&"%"==c.charAt(c.length-1)){var g=l(c),h=(h=R(c,100*h/(q-m)))?Math.min(100,Math.max(0,
0>h?-1*h:h)):g;f=y(h*(q-m)/100,void 0,a)}else l(c,!0)?f=y(c,void 0,a):k.find(c)&&0<k.find(c).length&&(g=k.find(c).offset().top-k.offset().top,f=y(g-10,void 0,a))},D=function(b,f){var h=[{wrap_scroll:e.get(0),warp_content:k.get(0),barra:c.get(0),barrita:g.get(0)},a,b],n=1==a.animate?a.speed:0;switch(b){case "init":d.isFunction(a.init)&&u&&(a.init.apply(E,h),u=!1);break;case "onScrollTop":d.isFunction(a.onScrollTop)&&0==z&&setTimeout(function(){a.onScrollTop.apply(E,h)},n);z=!0;break;case "onScrollEnd":d.isFunction(a.onScrollEnd)&&
0==A&&setTimeout(function(){a.onScrollEnd.apply(E,h)},n);A=!0;break;case "onUpdate":d.isFunction(a.onUpdate)&&setTimeout(function(){a.onUpdate.apply(E,h)},n);break;case "onScrolling":d.isFunction(a.onScrolling)&&(h.unshift(f),a.onScrolling.apply(E,h))}return b};e.data("scroll")&&Q();e.prepend(c.append(g));O();p=l(a.bar_size,!0)?l(a.bar_size):m-v;m-=v;c.setOuterHeight(p-1);p=c.height();t=q/p;F=q>m;r=m/t;g.setOuterHeight(r);r=g.height();g.css("top","0px");c.css("top",v);a.prop.height={wrap_scroll:m,
warp_content:q,barra:p,barrita:r,factor:t};F||c.fadeOut(0);e.css("position","relative");k.css("position","relative");"object"==typeof a.css_barra&&c.css(a.css_barra);"object"==typeof a.css_barrita&&g.css(a.css_barrita);"object"==typeof a.css_contenido&&k.css(a.css_contenido);(function(){function b(b,c,e,d,f){switch(c){case "mousewheel":w(b,e,d,f,!0);break;case "start":case "stop":if(1==a.hide){try{b.preventDefault?b.preventDefault():b.returnValue&&(b.returnValue=!1)}catch(g){}"start"==c?J():K()}}}
I(a._plugins.mousewheel?'$.scrollbars working with "jquery.mousewheel.min.js"':'The file "jquery.mousewheel.min.js" was not found.');a._plugins.mousewheel&&!a._plugins.scroll_activity?e.mousewheel(w):a._plugins.mousewheel&&a._plugins.scroll_activity?(e.bind("mousewheelactivity",a.event_settings,b),1==a.hide?K():""):this.addEventListener?(e[0].addEventListener("DOMMouseScroll",w,!1),e[0].addEventListener("mousewheel",w,!1)):e[0].onmousewheel=w;c.bind("mousedown.scroll",U);g.bind("mousedown",M);e.bind({update:V,
gototop:W,gotobottom:X,destroy:Q,"goto":L});1==a.hide&&(a._plugins.scroll_activity||e.hover(J,K).trigger("mouseout"),I(a._plugins.scroll_activity?'$.scrollbars working with "mousewheel_activity.min.js"':'The file "mousewheel_activity.min.js" was not found.'));T()})();e.data("scroll",a);D("init");return e})};var u=[],M=Object.prototype.toString,x="Boolean Number String Function Array Date RegExp Object".split(" ");d.each(x,function(d,N){u["[object "+x[d]+"]"]=(x[d]+"").toLowerCase()});d.type=d.type||
function(d){return null==d?String(d):u[M.call(d)]||"object"};d.fn.setOuterHeight=function(n,x,e){if(!this||0==this.length||isNaN(parseFloat(n)))return this;n=parseFloat(n);return this.each(function(){var u=d(this),a=0,c,g=["border-top-width","padding-top","padding-bottom","border-bottom-width"];!0===x&&g.push("margin-top","margin-bottom");d.each(g,function(d,e){c=u.css(e);a+=isNaN(parseFloat(c))?0:parseFloat(c)});a=0>=n-a?0:n-a;e?u.data("_outerHeight",a):u.height(a)})}})(jQuery);